<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"
            integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k"
            crossorigin="anonymous"></script>
</head>

<body>

<h1 style="text-align: center">Hello Anya!!!</h1>

<button id="sendMessage"> SEND MESSAGE ! </button>
<button id="joinRoom1"> JOIN ROOM 1 ! </button>
<button id="joinRoom2"> JOIN ROOM 2 ! </button>

<script>

    const socket = io('http://localhost:5200', {
        auth: {token: '123'},
        query: {'my-key': 'my-value'}
    });

    const sendMsgBtn = document.getElementById('sendMessage');
    const sendMsgRoom1Btn = document.getElementById('joinRoom1');
    const sendMsgRoom2Btn = document.getElementById('joinRoom2');

    sendMsgBtn.onclick = () => {

        socket.emit('sendMessage', {message: 'Привіт everybody!'});

        socket.on('message:received', (messageData) => {
            document.write(JSON.stringify(messageData, null, 2));
        });
        socket.on('globalBroadcast', (message) =>{
            alert(message);
        })

    };

    sendMsgRoom1Btn.onclick = () => {
        socket.emit('room:join', {roomId: 'Room 1'});
    };

    sendMsgRoom2Btn.onclick = () => {
        socket.emit('room:join', {roomId: 'Room 2'});
    };

    socket.on('room:newMember', ({id}) => {
        alert(`new user ${id} joined!`);
    });

</script>

</body>
</html>
